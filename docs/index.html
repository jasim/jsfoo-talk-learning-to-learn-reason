<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="generator" content="pandoc">
  <title>Learning to learn ReasonML</title>
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">
  <link rel="stylesheet" href="./css/reset.css">
  <link rel="stylesheet" href="./css/reveal.css">
  <style>
      code{white-space: pre-wrap;}
      span.smallcaps{font-variant: small-caps;}
      span.underline{text-decoration: underline;}
      div.column{display: inline-block; vertical-align: top; width: 50%;}
  </style>
  <style>
code.sourceCode > span { display: inline-block; line-height: 1.25; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
  </style>
  <link rel="stylesheet" href="./css/theme/serif.css" id="theme">
  <style>
    .reveal h1 {
      font-size: 2em;
    }
    
  .reveal section img {
    box-shadow: none;
    background-color: transparent;
    border: none;
  }
  
  .reveal .slides section {
    transition-duration: 200ms !important; 
  }

  .sourceCode {
    margin-top: 0 !important;
    margin-bottom: 1em !important;
  }

  .smallFont {
    font-size: 0.46em !important;
  }

  .tinyFont {
    font-size: 0.4em !important;
  }

  .noMaxHeight {
    max-height: none !important;
  }

  .noMaxHeight > code {
    max-height: none !important;
  }

  .float {
    float: left;
  }

  .halfWidth {
    width: 50% !important;
  }
  </style>
  <!-- Printing and PDF exports -->
  <script>
    var link = document.createElement( 'link' );
    link.rel = 'stylesheet';
    link.type = 'text/css';
    link.href = window.location.search.match( /print-pdf/gi ) ? './css/print/pdf.css' : './css/print/paper.css';
    document.getElementsByTagName( 'head' )[0].appendChild( link );
  </script>
  <!--[if lt IE 9]>
  <script src="./lib/js/html5shiv.js"></script>
  <![endif]-->
</head>
<body>
  <div class="reveal">
    <div class="slides">

<section id="title-slide">
  <h1 class="title">Learning to learn ReasonML</h1>
</section>

<section class="slide level2">

<pre><code>    
    LEARNING TO LEARN REASONML

    Jasim A Basheer 
    protoship.io

    @jasim_ab

</code></pre>
<p> </p>
<aside class="notes">
<p>Hello, my name is Jasim, and I’m here today to talk about ReasonML.</p>
</aside>
</section>
<section class="slide level2">

<p><img data-src="images/dos-ea.png" /></p>
<aside class="notes">
<p>A little about me, I’ve been programming professionally for over 10 years now. This is one of the earliest software that I built.</p>
</aside>
</section>
<section class="slide level2">

<p><img data-src="images/dos-tsm.png" /></p>
<aside class="notes">
<p>Here’s another. They use very old outdated technologies.</p>
<p>But thankfully I’ve since worked on modern web applications, front-end, back-end, and also different languages including Javascript.</p>
<p>Most recently I’ve been jamming with a friend building tools for designers &amp; front-end developers.</p>
</aside>
</section>
<section class="slide level2">

<h3 id="protoship-teleport">Protoship Teleport</h3>
<p><img data-src="images/teleport.png" /></p>
<aside class="notes">
<p>One is called Teleport – it is a Chrome extension that can capture a website and create a Sketch design out of it.</p>
<p>The other tool is called Protoship Codegen.</p>
</aside>
</section>
<section class="slide level2">

<p><img data-src="images/codegen-sketch.png" /></p>
<aside class="notes">
<p>It converts designs - made in tools like Adobe XD and Sketch - into responsive HTML and CSS, which programmers like you and me can use. So it’ll do static positioning, flexboxes, grids, and CSS that is cleaner than anything that I’d be able to write manually.</p>
<p>On the screen is a sample Sketch design,</p>
</aside>
</section>
<section class="slide level2">

<p><img data-src="images/codegen-ui.png" /></p>
<aside class="notes">
<p>and this is how it gets converted to code. This is the Codegen UI, and the rendering is all clean HTML and CSS.</p>
<p>All this stuff: the Sketch plugin, the Adobe XD plugin, the converter, the web UI, and the code generator – everything, is written in Reason.</p>
<p>But that happened only about half-way through the product. Before that it was all Javascript.</p>
<p>We didn’t know Reason or Typed FP when began working on this product over two years ago. We were rather forced to learn it.</p>
</aside>
</section>
<section class="slide level2">

<h3 id="raw-vector-node">Raw Vector Node</h3>
<p><img data-src="images/codegen-vecNode.png" /></p>
<aside class="notes">
<p>See here, is the raw vector node that Codegen extracts from Sketch. They’re absolutely positioned, and it is a far way away from being responsive HTML and CSS.</p>
</aside>
</section>
<section class="slide level2">

<p><img data-src="images/codegen-htmlNode.png" /> <img data-src="images/codegen-cssNode.png" /></p>
<aside class="notes">
<p>The challenge is to convert that raw node into this code. That’s a multi-step process. Here’s a rough pipeline of how Codegen does it:</p>
</aside>
</section>
<section class="slide level2">

<p><img data-src="images/codegen-workflow.svg" /></p>
<aside class="notes">
<p>In each step here, we decorate the nodes with more info, sometimes change their shapes, sometimes merge it with others, and generally wrangle with them quite a bit.</p>
<p>But we couldn’t mentally keep track of all that as they went through these transformations. We kept making mistakes and our thinking was muddled and progress was very slow.</p>
<p>We knew we needed a better way to deal with our data. It could not be an object-oriented approach because of reasons I’ll explain later, but we knew it had to be some form of types.</p>
</aside>
</section>
<section class="slide level2">

<p> </p>
<h4 id="reason-is-released">Reason is released</h4>
<pre><code>AUTHOR
Jordan Walke (and Cheng Lou and others)

WROTE
React, Reason, and ReasonReact</code></pre>
<aside class="notes">
<p>That was the time around when Jordan Walke, the original author of React, released the first version of Reason. He also shipped ReasonReact, which is the Reason adaptor for the React UI library.</p>
<p>Reason was a typed language, and thanks to ReasonReact we could also build UIs with it and mix and match React and Javascript code.</p>
</aside>
</section>
<section class="slide level2">

<p><img data-src="images/rwo-cover.png" /></p>
<aside class="notes">
<p>Learning and adopting this language was a long struggle. We spent countless hours with the Real World OCaml book - it is an excellent book on the language as well the craft of programming itself. We looked upon it with both delight at the insights on programming it gave us, and also with a fair amount of dread and frustration because of its unfamiliarity.</p>
<p>But the struggle was worth it. See when people</p>
<p>When I look back on the last 10 years of my programming career, I wonder what I was doing for the first 8, before I learned Reason and Typed functional programming.</p>
<p>And that’s why I’m here today to talk about it.</p>
</aside>
</section>
<section class="slide level2">

<h3 id="the-talk">The Talk</h3>
<ul>
<li>Reason: interesting bits</li>
<li>How does it feel to program</li>
<li>How to get started</li>
</ul>
<aside class="notes">
<p>In this talk I will try to describe the interesting bits of Reason; try to give you a feel for what it is to program with it; and finally leave with a few pointers on how to get started.</p>
</aside>
</section>
<section id="reason-is-ocaml" class="slide level2">
<h2>Reason is OCaml</h2>
<ul>
<li><p>First released in 1990</p></li>
<li><p>C like speeds</p></li>
<li><p>ISWIM syntax (OCaml, Haskell) not ALGOL (C, Java, Javascript etc.)</p></li>
</ul>
<aside class="notes">
<p>Reason is a new syntax on top of the OCaml programming language.</p>
<p>OCaml has a long history - it was first released in 1990 - about 30 years ago. It is a compiled language and produces very fast binaries.</p>
<p>Its syntax however is quite different from most languages that we’re used to.</p>
</aside>
</section>
<section class="slide level2">

<div class="sourceCode" id="cb3"><pre class="sourceCode ocaml smallFont"><code class="sourceCode ocaml"><span id="cb3-1"><a href="#cb3-1"></a><span class="kw">let</span> print_html_table segments =</span>
<span id="cb3-2"><a href="#cb3-2"></a>  printf <span class="st">&quot;&lt;table&gt;</span><span class="ch">\n</span><span class="st">&quot;</span>;</span>
<span id="cb3-3"><a href="#cb3-3"></a>  <span class="dt">List</span>.iter (<span class="kw">fun</span> line -&gt;</span>
<span id="cb3-4"><a href="#cb3-4"></a>    printf <span class="st">&quot;&lt;tr&gt;&quot;</span>;</span>
<span id="cb3-5"><a href="#cb3-5"></a>    <span class="dt">List</span>.iter (<span class="kw">fun</span> c -&gt; printf <span class="st">&quot;&lt;td&gt;%s&lt;/td&gt;&quot;</span> (escape c)) line;</span>
<span id="cb3-6"><a href="#cb3-6"></a>    printf <span class="st">&quot;&lt;/tr&gt;</span><span class="ch">\n</span><span class="st">&quot;</span>;</span>
<span id="cb3-7"><a href="#cb3-7"></a>  ) segments;</span>
<span id="cb3-8"><a href="#cb3-8"></a>  printf <span class="st">&quot;&lt;/table&gt;</span><span class="ch">\n</span><span class="st">&quot;</span>;</span>
<span id="cb3-9"><a href="#cb3-9"></a>;;</span></code></pre></div>
<aside class="notes">
<p>Here is an OCaml program that prints an HTML table from a 2-dimensional list. See that function arguments are separated by spaces, and anonymous functions are created with the <code>fun</code> keyboard.</p>
</aside>
</section>
<section class="slide level2">

<div class="sourceCode" id="cb4"><pre class="sourceCode ocaml smallFont"><code class="sourceCode ocaml"><span id="cb4-1"><a href="#cb4-1"></a><span class="kw">let</span> print_html_table segments =</span>
<span id="cb4-2"><a href="#cb4-2"></a>  printf <span class="st">&quot;&lt;table&gt;</span><span class="ch">\n</span><span class="st">&quot;</span>;</span>
<span id="cb4-3"><a href="#cb4-3"></a>  <span class="dt">List</span>.iter (<span class="kw">fun</span> line -&gt;</span>
<span id="cb4-4"><a href="#cb4-4"></a>    printf <span class="st">&quot;&lt;tr&gt;&quot;</span>;</span>
<span id="cb4-5"><a href="#cb4-5"></a>    <span class="dt">List</span>.iter (<span class="kw">fun</span> c -&gt; printf <span class="st">&quot;&lt;td&gt;%s&lt;/td&gt;&quot;</span> (escape c)) line;</span>
<span id="cb4-6"><a href="#cb4-6"></a>    printf <span class="st">&quot;&lt;/tr&gt;</span><span class="ch">\n</span><span class="st">&quot;</span>;</span>
<span id="cb4-7"><a href="#cb4-7"></a>  ) segments;</span>
<span id="cb4-8"><a href="#cb4-8"></a>  printf <span class="st">&quot;&lt;/table&gt;</span><span class="ch">\n</span><span class="st">&quot;</span>;</span>
<span id="cb4-9"><a href="#cb4-9"></a>;;</span></code></pre></div>
<div class="sourceCode" id="cb5"><pre class="sourceCode ocaml smallFont"><code class="sourceCode ocaml"><span id="cb5-1"><a href="#cb5-1"></a><span class="kw">let</span> print_html_table = segments =&gt; {</span>
<span id="cb5-2"><a href="#cb5-2"></a>  printf(<span class="st">&quot;&lt;table&gt;</span><span class="ch">\n</span><span class="st">&quot;</span>);</span>
<span id="cb5-3"><a href="#cb5-3"></a>  <span class="dt">List</span>.iter(</span>
<span id="cb5-4"><a href="#cb5-4"></a>    line =&gt; {</span>
<span id="cb5-5"><a href="#cb5-5"></a>      printf(<span class="st">&quot;&lt;tr&gt;&quot;</span>);</span>
<span id="cb5-6"><a href="#cb5-6"></a>      <span class="dt">List</span>.iter(c =&gt; printf(<span class="st">&quot;&lt;td&gt;%s&lt;/td&gt;&quot;</span>, escape(c)), line);</span>
<span id="cb5-7"><a href="#cb5-7"></a>      printf(<span class="st">&quot;&lt;/tr&gt;</span><span class="ch">\n</span><span class="st">&quot;</span>);</span>
<span id="cb5-8"><a href="#cb5-8"></a>    },</span>
<span id="cb5-9"><a href="#cb5-9"></a>    segments,</span>
<span id="cb5-10"><a href="#cb5-10"></a>  );</span>
<span id="cb5-11"><a href="#cb5-11"></a>  printf(<span class="st">&quot;&lt;/table&gt;</span><span class="ch">\n</span><span class="st">&quot;</span>);</span>
<span id="cb5-12"><a href="#cb5-12"></a>};</span></code></pre></div>
<aside class="notes">
<p>Here’s the same OCaml code, but in the Reason syntax. This is closer to ES6 as we know it - there are braces to denote blocks. The fat arrow operator lets us create functions and semicolons for separating lines.</p>
<p>Underneath, however Reason and OCaml are the same language and have the same semantics. In this presentation I’ll use refer to Reason and OCaml interchangeably, depending on what fits the context better.</p>
</aside>
</section>
<section id="what-can-we-build-with-reasonocaml" class="slide level2">
<h2>What can we build with Reason/OCaml?</h2>
<aside class="notes">
<p>So is it actually useful? This language. What can we build with it? Let me take you through some examples.</p>
</aside>
</section>
<section class="slide level2">

<h4 id="high-frequency-trading-software">High-frequency trading software</h4>
<p> </p>
<p><img data-src="images/jane-street.png" /></p>
<aside class="notes">
<p>When you start reading about OCaml, you’ll often come across Jane Street. They are one of the largest production users of the language and they do billions of dollars worth of trading, all with software written in OCaml.</p>
</aside>
</section>
<section class="slide level2">

<h4 id="worlds-second-largest-crawler">World’s second largest crawler</h4>
<p> </p>
<p><img data-src="images/ahrefs.png" /></p>
<aside class="notes">
<p>If you have done any SEO work, you might be familiar with Ahrefs. They crawl about 5 million pages every minute, and they have the second largest index just after Google. They use native OCaml for all the back-end infra and for the front-end web they use Reason.</p>
</aside>
</section>
<section class="slide level2">

<h4 id="compilers">Compilers</h4>
<p> </p>
<ul>
<li>First version of the Rust compiler</li>
<li>Flow (typechecker for Javascript)</li>
<li>Hack (Facebook’s PHP compiler)</li>
</ul>
<p> </p>
<aside class="notes">
<p>OCaml is also particularly nice to write compilers on - in fact anything that deals with a lot of tree manipulation is a great fit. Rust borrows many ideas from OCaml, and their first compiler was written in the language. Facebook is also a large user of OCaml internally.</p>
<p>5mins</p>
</aside>
</section>
<section id="front-end-web-applications" class="slide level2">
<h2>Front-end web applications!</h2>
<p> </p>
<p>Compile Reason into clean performant Javascript</p>
<h4 id="using-the-bucklescript-compiler">using the BuckleScript compiler</h4>
<p><img data-src="images/bloomberg-logo.png" /></p>
<aside class="notes">
<p>Those were the traditional applications of OCaml.</p>
<p>OCaml can also be used to build front-end web applications, which is what this talk is about.</p>
<p>There is an OCaml compiler called BuckleScrip, built at Bloomberg. Bloomberg also uses OCaml in their trading desks. BuckleScript emits performant Javascript and also lets us use any npm package with Reason almost seamlessly.</p>
</aside>
</section>
<section class="slide level2">

<p><img data-src="images/pupilfirst-ui-1.png" /></p>
<aside class="notes">
<p>Here’s a project built with BuckleScript and Reason and ReasonReact. It is called PupilFirst.</p>
</aside>
</section>
<section class="slide level2">

<p><img data-src="images/pupilfirst-ui-2.png" /></p>
<aside class="notes">
<p>It is a learning management system built here in Bangalore.</p>
</aside>
</section>
<section class="slide level2">

<p><img data-src="images/pupilfirst-ui-3.png" /></p>
<aside class="notes">
<p>It has complex data model and advanced UI interactions.</p>
</aside>
</section>
<section class="slide level2">

<p><img data-src="images/pupilfirst-github.png" /></p>
<aside class="notes">
<p>Oh and it is fully open-source. If you want to see a real-world Reason web application, there is no better place to look. One of the authors, Hari Gopal, had also spoken at last year’s JsFoo on Reason itself.</p>
</aside>
</section>
<section class="slide level2">

<div class="sourceCode" id="cb6"><pre class="sourceCode ocaml"><code class="sourceCode ocaml"><span id="cb6-1"><a href="#cb6-1"></a><span class="kw">if</span> (MomentRe.Moment.isSameWithGranularity(</span>
<span id="cb6-2"><a href="#cb6-2"></a>      MomentRe.momentNow(),</span>
<span id="cb6-3"><a href="#cb6-3"></a>      MomentRe.moment(<span class="st">&quot;2020-04-01&quot;</span>),</span>
<span id="cb6-4"><a href="#cb6-4"></a>      `day,</span>
<span id="cb6-5"><a href="#cb6-5"></a>    )) {</span>
<span id="cb6-6"><a href="#cb6-6"></a>  Js.<span class="dt">log</span>(<span class="st">&quot;It is the 1st of April!&quot;</span>);</span>
<span id="cb6-7"><a href="#cb6-7"></a>} <span class="kw">else</span> {</span>
<span id="cb6-8"><a href="#cb6-8"></a>  Js.<span class="dt">log</span>(<span class="st">&quot;A dreary day&quot;</span>);</span>
<span id="cb6-9"><a href="#cb6-9"></a>};</span></code></pre></div>
<aside class="notes">
<p>Let’s now see BuckleScript in action.</p>
<p>This Reason code here - it checks whether the current day is April 1st 2020, and then shows a message.</p>
<p>It uses the momentjs Javascript library from npm. Now let’s see how the BuckleScript output looks.</p>
</aside>
</section>
<section class="slide level2">

<div class="sourceCode" id="cb7"><pre class="sourceCode ocaml"><code class="sourceCode ocaml"><span id="cb7-1"><a href="#cb7-1"></a><span class="kw">if</span> (MomentRe.Moment.isSameWithGranularity(</span>
<span id="cb7-2"><a href="#cb7-2"></a>      MomentRe.momentNow(),</span>
<span id="cb7-3"><a href="#cb7-3"></a>      MomentRe.moment(<span class="st">&quot;2020-04-01&quot;</span>),</span>
<span id="cb7-4"><a href="#cb7-4"></a>      `day,</span>
<span id="cb7-5"><a href="#cb7-5"></a>    )) {</span>
<span id="cb7-6"><a href="#cb7-6"></a>  Js.<span class="dt">log</span>(<span class="st">&quot;It is the 1st of April!&quot;</span>);</span>
<span id="cb7-7"><a href="#cb7-7"></a>} <span class="kw">else</span> {</span>
<span id="cb7-8"><a href="#cb7-8"></a>  Js.<span class="dt">log</span>(<span class="st">&quot;A dreary day&quot;</span>);</span>
<span id="cb7-9"><a href="#cb7-9"></a>};</span></code></pre></div>
<div class="sourceCode" id="cb8"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb8-1"><a href="#cb8-1"></a><span class="co">// Generated by BUCKLESCRIPT VERSION 5.0.6, PLEASE EDIT WITH CARE</span></span>
<span id="cb8-2"><a href="#cb8-2"></a><span class="st">&#39;use strict&#39;</span><span class="op">;</span></span>
<span id="cb8-3"><a href="#cb8-3"></a></span>
<span id="cb8-4"><a href="#cb8-4"></a><span class="kw">var</span> Moment <span class="op">=</span> <span class="at">require</span>(<span class="st">&quot;moment&quot;</span>)<span class="op">;</span></span>
<span id="cb8-5"><a href="#cb8-5"></a><span class="kw">var</span> MomentRe <span class="op">=</span> <span class="at">require</span>(<span class="st">&quot;bs-moment/src/MomentRe.js&quot;</span>)<span class="op">;</span></span>
<span id="cb8-6"><a href="#cb8-6"></a></span>
<span id="cb8-7"><a href="#cb8-7"></a><span class="cf">if</span> (<span class="at">Moment</span>().<span class="at">isSame</span>(<span class="va">MomentRe</span>.<span class="at">moment</span>(<span class="kw">undefined</span><span class="op">,</span> <span class="st">&quot;2020-04-01&quot;</span>)<span class="op">,</span> <span class="st">&quot;day&quot;</span>)) <span class="op">{</span></span>
<span id="cb8-8"><a href="#cb8-8"></a>  <span class="va">console</span>.<span class="at">log</span>(<span class="st">&quot;It is the 1st of April!&quot;</span>)<span class="op">;</span></span>
<span id="cb8-9"><a href="#cb8-9"></a><span class="op">}</span> <span class="cf">else</span> <span class="op">{</span></span>
<span id="cb8-10"><a href="#cb8-10"></a>  <span class="va">console</span>.<span class="at">log</span>(<span class="st">&quot;A dreary day&quot;</span>)<span class="op">;</span></span>
<span id="cb8-11"><a href="#cb8-11"></a><span class="op">}</span></span></code></pre></div>
<aside class="notes">
<p>As you can see BuckleScript required the correct npm module and compiled everything to straightforward Javascript.</p>
</aside>
</section>
<section id="javascript-vs-reason" class="slide level2">
<h2>Javascript vs Reason</h2>
<ul>
<li><p><strong>Javascript</strong>: <code>this</code>, variable hoisting, prototypes, ES6 classes, objects, mutations, <em>functions, modules</em></p></li>
<li><p><strong>Reason</strong>: <em>functions, modules, types</em></p></li>
</ul>
<aside class="notes">
<p>Javascript however is a large language – it has far too many concepts – and that is obvious if you’ve participated in any Javascript interview. You can ask and be asked so many questions. There is the concept of <code>this</code>, there is prototypes and prototype inheritance chains which have their own rules, and there are also classes, objects, and mutation. It also has functions and higher-order functions.</p>
<p>Reason comparatively is a smaller language. It only has functions, modules, and types. We don’t, for example, concern ourselves with what <code>this</code> could be during runtime. In fact a Reason interview would be a rather unexciting event - there aren’t that many quirks to the language to deal with.</p>
</aside>
</section>
<section id="programming-in-reason" class="slide level2">
<h2>Programming in Reason</h2>
<p>Two principles:</p>
<ol type="1">
<li>Write pure functions</li>
<li>Get their types right</li>
</ol>
<aside class="notes">
<p>The way we program Reason is to write our programs as a series of pure functions. That’s it.</p>
<p>But how is that an improvement over Javascript? We can write Javascript in a similar manner - with pure functions everywhere, and just an outer shell for all the I/O. That’s essentially functional programming, and that’s pretty nice.</p>
<p>But Reason is not only “functional”, it is also “typed”, and the types guarantee something:</p>
</aside>
</section>
<section id="perfection" class="slide level2">
<h2>Perfection</h2>
<p>The perfect computer program –</p>
<aside class="notes">
<p>“perfection”.</p>
<p>Reason functions are more “perfect” than functions written in Javascript. I’m using the word “perfection” here, based on a talk given by Prof. Xavier Leroy, who is a programming languages researcher and also the author OCaml</p>
</aside>
</section>
<section class="slide level2">

<blockquote>
<p>(a perfect program is) The one that does exactly what it should do, no more, no less, every time, with perfect reliability, and forever. The kind of perfection that you can get from mathematical definitions, which software is to a large extent, or from philosophical concepts.</p>
</blockquote>
<p><sub><sup>“In search of software perfection”, by Dr. Xavier Leroy, author of OCaml</sub></sup></p>
<aside class="notes">
<p>“A perfect program does exactly what it should do, no more, no less, every time, with perfect reliability, and forever. The kind of perfection that you can get from mathematical definitions, which software is to a large extent, or from philosophical concepts.”</p>
<p>What can that mean in the context of our day-to-day programming work? Let’s take a look.</p>
</aside>
</section>
<section class="slide level2">

<div class="sourceCode" id="cb9"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb9-1"><a href="#cb9-1"></a><span class="kw">let</span> showNext <span class="op">=</span> lastUser <span class="kw">=&gt;</span> <span class="op">{</span></span>
<span id="cb9-2"><a href="#cb9-2"></a>  <span class="va">console</span>.<span class="at">log</span>(<span class="st">&quot;You will be user &quot;</span> <span class="op">+</span> (<span class="va">lastUser</span>.<span class="at">id</span> <span class="op">+</span> <span class="dv">1</span>))</span>
<span id="cb9-3"><a href="#cb9-3"></a><span class="op">}</span></span></code></pre></div>
<div class="sourceCode" id="cb10"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb10-1"><a href="#cb10-1"></a><span class="at">showNext</span>(<span class="op">{</span><span class="dt">id</span><span class="op">:</span> <span class="dv">16</span><span class="op">}</span>)</span></code></pre></div>
<pre><code>You will be user 17</code></pre>
<aside class="notes">
<p>Consider this function <code>showNext</code> - it tells you what your user id could be, based on the last user in the system.</p>
<p>We pass it an object with id 16, and it prints 17. The code is as simple as it can get.</p>
<p>But does it work perfectly reliably all the time, every time? Will it ever crash in production?</p>
</aside>
</section>
<section class="slide level2">

<div class="sourceCode" id="cb12"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb12-1"><a href="#cb12-1"></a><span class="kw">let</span> showNext <span class="op">=</span> u <span class="kw">=&gt;</span> <span class="op">{</span></span>
<span id="cb12-2"><a href="#cb12-2"></a>  <span class="va">console</span>.<span class="at">log</span>(<span class="st">&quot;You will be user &quot;</span> <span class="op">+</span> (<span class="va">u</span>.<span class="at">id</span> <span class="op">+</span> <span class="dv">1</span>))</span>
<span id="cb12-3"><a href="#cb12-3"></a><span class="op">}</span></span></code></pre></div>
<div class="sourceCode" id="cb13"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb13-1"><a href="#cb13-1"></a><span class="at">showNext</span>(<span class="op">{</span><span class="dt">id</span><span class="op">:</span> <span class="kw">null</span>)</span></code></pre></div>
<aside class="notes">
<p>What if <code>id</code> is null?</p>
</aside>
</section>
<section class="slide level2">

<div class="sourceCode" id="cb14"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb14-1"><a href="#cb14-1"></a><span class="kw">let</span> showNext <span class="op">=</span> u <span class="kw">=&gt;</span> <span class="op">{</span></span>
<span id="cb14-2"><a href="#cb14-2"></a>  <span class="va">console</span>.<span class="at">log</span>(<span class="st">&quot;You will be user &quot;</span> <span class="op">+</span> (<span class="va">u</span>.<span class="at">id</span> <span class="op">+</span> <span class="dv">1</span>))</span>
<span id="cb14-3"><a href="#cb14-3"></a><span class="op">}</span></span></code></pre></div>
<div class="sourceCode" id="cb15"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb15-1"><a href="#cb15-1"></a><span class="at">showNext</span>(<span class="op">{</span><span class="dt">id</span><span class="op">:</span> <span class="kw">null</span>)</span></code></pre></div>
<pre><code>You will be user 1</code></pre>
<aside class="notes">
<p>Thankfully that works. Our function is resilient to nulls.</p>
</aside>
</section>
<section class="slide level2">

<div class="sourceCode" id="cb17"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb17-1"><a href="#cb17-1"></a><span class="kw">let</span> showNext <span class="op">=</span> u <span class="kw">=&gt;</span> <span class="op">{</span></span>
<span id="cb17-2"><a href="#cb17-2"></a>  <span class="va">console</span>.<span class="at">log</span>(<span class="st">&quot;You will be user &quot;</span> <span class="op">+</span> (<span class="va">u</span>.<span class="at">id</span> <span class="op">+</span> <span class="dv">1</span>))</span>
<span id="cb17-3"><a href="#cb17-3"></a><span class="op">}</span></span></code></pre></div>
<div class="sourceCode" id="cb18"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb18-1"><a href="#cb18-1"></a><span class="at">showNext</span>(<span class="op">{</span><span class="dt">id</span><span class="op">:</span> <span class="st">&quot;193&quot;</span><span class="op">}</span>)</span></code></pre></div>
<aside class="notes">
<p>What if id was a string?</p>
</aside>
</section>
<section class="slide level2">

<div class="sourceCode" id="cb19"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb19-1"><a href="#cb19-1"></a><span class="kw">let</span> showNext <span class="op">=</span> u <span class="kw">=&gt;</span> <span class="op">{</span></span>
<span id="cb19-2"><a href="#cb19-2"></a>  <span class="va">console</span>.<span class="at">log</span>(<span class="st">&quot;You will be user &quot;</span> <span class="op">+</span> (<span class="va">u</span>.<span class="at">id</span> <span class="op">+</span> <span class="dv">1</span>))</span>
<span id="cb19-3"><a href="#cb19-3"></a><span class="op">}</span></span></code></pre></div>
<div class="sourceCode" id="cb20"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb20-1"><a href="#cb20-1"></a><span class="at">showNext</span>(<span class="op">{</span><span class="dt">id</span><span class="op">:</span> <span class="st">&quot;193&quot;</span><span class="op">}</span>)</span></code></pre></div>
<pre><code>You will be user 1931</code></pre>
<aside class="notes">
<p>It doesn’t crash, but the result isn’t what we wanted.</p>
</aside>
</section>
<section class="slide level2">

<div class="sourceCode" id="cb22"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb22-1"><a href="#cb22-1"></a><span class="kw">let</span> showNext <span class="op">=</span> u <span class="kw">=&gt;</span> <span class="op">{</span></span>
<span id="cb22-2"><a href="#cb22-2"></a>  <span class="va">console</span>.<span class="at">log</span>(<span class="st">&quot;You will be user &quot;</span> <span class="op">+</span> (<span class="va">u</span>.<span class="at">id</span> <span class="op">+</span> <span class="dv">1</span>))</span>
<span id="cb22-3"><a href="#cb22-3"></a><span class="op">}</span></span></code></pre></div>
<div class="sourceCode" id="cb23"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb23-1"><a href="#cb23-1"></a><span class="at">showNext</span>(<span class="op">{}</span>)</span></code></pre></div>
<aside class="notes">
<p>Now what happens when the object is empty?</p>
</aside>
</section>
<section class="slide level2">

<div class="sourceCode" id="cb24"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb24-1"><a href="#cb24-1"></a><span class="kw">let</span> showNext <span class="op">=</span> u <span class="kw">=&gt;</span> <span class="op">{</span></span>
<span id="cb24-2"><a href="#cb24-2"></a>  <span class="va">console</span>.<span class="at">log</span>(<span class="st">&quot;You will be user &quot;</span> <span class="op">+</span> (<span class="va">u</span>.<span class="at">id</span> <span class="op">+</span> <span class="dv">1</span>))</span>
<span id="cb24-3"><a href="#cb24-3"></a><span class="op">}</span></span></code></pre></div>
<div class="sourceCode" id="cb25"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb25-1"><a href="#cb25-1"></a><span class="at">showNext</span>(<span class="op">{}</span>)</span></code></pre></div>
<pre><code>You will be user NaN</code></pre>
<aside class="notes">
<p>This is also a wrong result.</p>
</aside>
</section>
<section class="slide level2">

<div class="sourceCode" id="cb27"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb27-1"><a href="#cb27-1"></a><span class="kw">let</span> showNext <span class="op">=</span> u <span class="kw">=&gt;</span> <span class="op">{</span></span>
<span id="cb27-2"><a href="#cb27-2"></a>  <span class="va">console</span>.<span class="at">log</span>(<span class="st">&quot;You will be user &quot;</span> <span class="op">+</span> (<span class="va">u</span>.<span class="at">id</span> <span class="op">+</span> <span class="dv">1</span>))</span>
<span id="cb27-3"><a href="#cb27-3"></a><span class="op">}</span></span></code></pre></div>
<div class="sourceCode" id="cb28"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb28-1"><a href="#cb28-1"></a><span class="kw">let</span> users <span class="op">=</span> []</span>
<span id="cb28-2"><a href="#cb28-2"></a><span class="kw">let</span> lastUser <span class="op">=</span> users[<span class="va">users</span>.<span class="at">length</span> <span class="op">-</span> <span class="dv">1</span>]</span>
<span id="cb28-3"><a href="#cb28-3"></a></span>
<span id="cb28-4"><a href="#cb28-4"></a><span class="at">showNext</span>(lastUser)</span></code></pre></div>
<aside class="notes">
<p>Here we have a list of users, and we’ll find the last of them and apply to <code>showNext</code></p>
<p>But unfortunately, the list is empty. What happens now?</p>
</aside>
</section>
<section class="slide level2">

<div class="sourceCode" id="cb29"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb29-1"><a href="#cb29-1"></a><span class="kw">let</span> showNext <span class="op">=</span> u <span class="kw">=&gt;</span> <span class="op">{</span></span>
<span id="cb29-2"><a href="#cb29-2"></a>  <span class="va">console</span>.<span class="at">log</span>(<span class="st">&quot;You will be user &quot;</span> <span class="op">+</span> (<span class="va">u</span>.<span class="at">id</span> <span class="op">+</span> <span class="dv">1</span>))</span>
<span id="cb29-3"><a href="#cb29-3"></a><span class="op">}</span></span></code></pre></div>
<div class="sourceCode" id="cb30"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb30-1"><a href="#cb30-1"></a><span class="kw">let</span> users <span class="op">=</span> []</span>
<span id="cb30-2"><a href="#cb30-2"></a><span class="kw">let</span> lastUser <span class="op">=</span> users[<span class="va">users</span>.<span class="at">length</span> <span class="op">-</span> <span class="dv">1</span>]</span>
<span id="cb30-3"><a href="#cb30-3"></a></span>
<span id="cb30-4"><a href="#cb30-4"></a><span class="at">showNext</span>(lastUser)</span></code></pre></div>
<pre><code>Uncaught TypeError: Cannot read property &#39;id&#39; of undefined</code></pre>
<aside class="notes">
<p>The function actually crashes.</p>
<p>This is a common source of error when programming in JS - we fetch a value from an array or an object – and sometimes it doesn’t exist – which means it returns a null or an undefined. We then pass that down to other functions.. and things crash in production. Sometimes they crash far away from the place where the undefined originated, and so we have to work backwards quite a bit to debug it.</p>
</aside>
</section>
<section class="slide level2">

<div class="sourceCode" id="cb32"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb32-1"><a href="#cb32-1"></a><span class="at">showNext</span>()</span>
<span id="cb32-2"><a href="#cb32-2"></a><span class="at">showNext</span>(<span class="op">{</span><span class="dt">id</span><span class="op">:</span> <span class="st">&quot;a&quot;</span><span class="op">}</span>)</span>
<span id="cb32-3"><a href="#cb32-3"></a><span class="at">showNext</span>(<span class="op">{</span><span class="dt">id</span><span class="op">:</span> <span class="op">{}}</span>)</span>
<span id="cb32-4"><a href="#cb32-4"></a><span class="at">showNext</span>(<span class="kw">undefined</span>)</span>
<span id="cb32-5"><a href="#cb32-5"></a><span class="at">showNext</span>(<span class="kw">null</span>)</span>
<span id="cb32-6"><a href="#cb32-6"></a><span class="at">showNext</span>(<span class="dv">0</span>)</span>
<span id="cb32-7"><a href="#cb32-7"></a><span class="at">showNext</span>(<span class="st">&quot;a&quot;</span>)</span>
<span id="cb32-8"><a href="#cb32-8"></a><span class="at">showNext</span>([])</span>
<span id="cb32-9"><a href="#cb32-9"></a><span class="at">showNext</span>([<span class="dv">1</span>])</span>
<span id="cb32-10"><a href="#cb32-10"></a><span class="at">showNext</span>(a <span class="kw">=&gt;</span> a <span class="op">+</span> <span class="dv">1</span>)</span></code></pre></div>
<aside class="notes">
<p>Okay, to make a long story short, none of the invokations here would work correctly.</p>
</aside>
</section>
<section class="slide level2">

<div class="sourceCode" id="cb33"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb33-1"><a href="#cb33-1"></a><span class="at">showNext</span>(<span class="op">{</span><span class="dt">id</span><span class="op">:</span> <span class="dv">112</span><span class="op">}</span>)</span></code></pre></div>
<pre><code>You will be user 113</code></pre>
<aside class="notes">
<p>The only way the function can succeed is when it receives an object which has a field <code>id</code>, which has an integer value.</p>
<p>So why does Javascript allow this function to be called with any other kind of argument? What if we could write functions that will always work because they always receive the right kind of data. It will change the way we write software.</p>
<p>This is done in Reason with type definitions - it is sort of a metadata that mentions what the shape and structure of different values in the program are.</p>
<p>Let’s see how that works.</p>
</aside>
</section>
<section class="slide level2">

<div class="sourceCode" id="cb35"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb35-1"><a href="#cb35-1"></a>type user <span class="op">=</span> <span class="op">{</span></span>
<span id="cb35-2"><a href="#cb35-2"></a></span>
<span id="cb35-3"><a href="#cb35-3"></a><span class="op">}</span></span></code></pre></div>
<aside class="notes">
<p>Here is a Reason type definition; we’re saying that there is a type called user</p>
</aside>
</section>
<section class="slide level2">

<div class="sourceCode" id="cb36"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb36-1"><a href="#cb36-1"></a>type user <span class="op">=</span> <span class="op">{</span></span>
<span id="cb36-2"><a href="#cb36-2"></a>  id</span>
<span id="cb36-3"><a href="#cb36-3"></a><span class="op">}</span></span></code></pre></div>
<aside class="notes">
<p>which has a field <code>id</code></p>
</aside>
</section>
<section class="slide level2">

<div class="sourceCode" id="cb37"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb37-1"><a href="#cb37-1"></a>type user <span class="op">=</span> <span class="op">{</span></span>
<span id="cb37-2"><a href="#cb37-2"></a>  <span class="dt">id</span><span class="op">:</span> int</span>
<span id="cb37-3"><a href="#cb37-3"></a><span class="op">};</span></span></code></pre></div>
<aside class="notes">
<p>whose values are always integers.</p>
<p>Now let’s write <code>showNext</code> in Reason.</p>
</aside>
</section>
<section class="slide level2">

<div class="sourceCode" id="cb38"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb38-1"><a href="#cb38-1"></a>type user <span class="op">=</span> <span class="op">{</span></span>
<span id="cb38-2"><a href="#cb38-2"></a>  <span class="dt">id</span><span class="op">:</span> int</span>
<span id="cb38-3"><a href="#cb38-3"></a><span class="op">};</span></span>
<span id="cb38-4"><a href="#cb38-4"></a></span>
<span id="cb38-5"><a href="#cb38-5"></a><span class="kw">let</span> showNext <span class="op">=</span> u <span class="kw">=&gt;</span> <span class="op">{</span></span>
<span id="cb38-6"><a href="#cb38-6"></a>  <span class="va">Js</span>.<span class="at">log</span>(<span class="st">&quot;You will be user &quot;</span> <span class="op">++</span> <span class="at">string_of_int</span>(<span class="va">u</span>.<span class="at">id</span> <span class="op">+</span> <span class="dv">1</span>))<span class="op">;</span></span>
<span id="cb38-7"><a href="#cb38-7"></a><span class="op">};</span></span></code></pre></div>
<aside class="notes">
<p>You can see that there is an explicit cast from integer to string, but otherwise the Reason version looks similar to the ES6 version. Let us run it.</p>
</aside>
</section>
<section class="slide level2">

<div class="sourceCode" id="cb39"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb39-1"><a href="#cb39-1"></a>type user <span class="op">=</span> <span class="op">{</span></span>
<span id="cb39-2"><a href="#cb39-2"></a>  <span class="dt">id</span><span class="op">:</span> int</span>
<span id="cb39-3"><a href="#cb39-3"></a><span class="op">};</span></span>
<span id="cb39-4"><a href="#cb39-4"></a></span>
<span id="cb39-5"><a href="#cb39-5"></a><span class="kw">let</span> showNext <span class="op">=</span> u <span class="kw">=&gt;</span> <span class="op">{</span></span>
<span id="cb39-6"><a href="#cb39-6"></a>  <span class="va">Js</span>.<span class="at">log</span>(<span class="st">&quot;You will be user &quot;</span> <span class="op">++</span> <span class="at">string_of_int</span>(<span class="va">u</span>.<span class="at">id</span> <span class="op">+</span> <span class="dv">1</span>))<span class="op">;</span></span>
<span id="cb39-7"><a href="#cb39-7"></a><span class="op">};</span></span>
<span id="cb39-8"><a href="#cb39-8"></a></span>
<span id="cb39-9"><a href="#cb39-9"></a><span class="at">showNext</span>(<span class="op">{</span><span class="dt">id</span><span class="op">:</span> <span class="dv">15</span><span class="op">}</span>)<span class="op">;</span></span></code></pre></div>
<pre><code>You will be user 16</code></pre>
<aside class="notes">
<p>It works. Can we send this function invalid data, and break it, like we did with the JS version?</p>
</aside>
</section>
<section class="slide level2">

<div class="sourceCode" id="cb41"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb41-1"><a href="#cb41-1"></a>type user <span class="op">=</span> <span class="op">{</span> <span class="dt">id</span><span class="op">:</span> int <span class="op">};</span></span>
<span id="cb41-2"><a href="#cb41-2"></a><span class="kw">let</span> showNext <span class="op">=</span> u <span class="kw">=&gt;</span> <span class="op">{</span></span>
<span id="cb41-3"><a href="#cb41-3"></a>  <span class="va">Js</span>.<span class="at">log</span>(<span class="st">&quot;You will be user &quot;</span> <span class="op">++</span> <span class="at">string_of_int</span>(<span class="va">u</span>.<span class="at">id</span> <span class="op">+</span> <span class="dv">1</span>))<span class="op">;</span></span>
<span id="cb41-4"><a href="#cb41-4"></a><span class="op">};</span></span>
<span id="cb41-5"><a href="#cb41-5"></a><span class="at">showNext</span>(<span class="op">{</span><span class="dt">id</span><span class="op">:</span> <span class="st">&quot;abc&quot;</span><span class="op">}</span>)<span class="op">;</span></span></code></pre></div>
<p><img data-src="images/comp-error-string1.png" /></p>
<aside class="notes">
<p>Yes it breaks! But this is a compile-time breakage. This means no Javascript code was generated for this Reason program we wrote.</p>
<p>That’s because the compiler found a type error in the code.</p>
</aside>
</section>
<section class="slide level2">

<div class="sourceCode" id="cb42"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb42-1"><a href="#cb42-1"></a>type user <span class="op">=</span> <span class="op">{</span> <span class="dt">id</span><span class="op">:</span> int <span class="op">};</span></span>
<span id="cb42-2"><a href="#cb42-2"></a><span class="kw">let</span> showNext <span class="op">=</span> u <span class="kw">=&gt;</span> <span class="op">{</span></span>
<span id="cb42-3"><a href="#cb42-3"></a>  <span class="va">Js</span>.<span class="at">log</span>(<span class="st">&quot;You will be user &quot;</span> <span class="op">++</span> <span class="at">string_of_int</span>(<span class="va">u</span>.<span class="at">id</span> <span class="op">+</span> <span class="dv">1</span>))<span class="op">;</span></span>
<span id="cb42-4"><a href="#cb42-4"></a><span class="op">};</span></span>
<span id="cb42-5"><a href="#cb42-5"></a><span class="at">showNext</span>(<span class="op">{</span><span class="dt">id</span><span class="op">:</span> <span class="st">&quot;abc&quot;</span><span class="op">}</span>)<span class="op">;</span></span></code></pre></div>
<p><img data-src="images/comp-error-string2.png" /></p>
<aside class="notes">
<p>It inferred that the function <code>showNext</code> expects a value of type <code>user</code>, and <code>user</code> should have an integer id column inside it. But instead of <code>user</code> we sent a random string. That’ll definitely break the function in runtime, so Reason wouldn’t allow it to move past compilation.</p>
<p>But how did Reason figure out that <code>showNext</code> expects a value of type <code>user</code>? We haven’t mentioned that explicitly anywhere. What’s happening is “type inference” – if you imagined that you’ll have to litter your codebase with type annotations, then type inference will make you happy.</p>
<p>Based on the context, Reason figures out the types of values and arguments to functions. It works well even for large programs.</p>
<p>Now let’s see how Reason fares with other invalid values.</p>
</aside>
</section>
<section class="slide level2">

<div class="sourceCode" id="cb43"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb43-1"><a href="#cb43-1"></a><span class="at">showNext</span>(<span class="op">{</span><span class="dt">id</span><span class="op">:</span> []<span class="op">}</span>)<span class="op">;</span></span></code></pre></div>
<p><img data-src="images/comp-error-list.png" /></p>
<aside class="notes">
<p>We’re passing in a list instead of an integer. Type error.</p>
</aside>
</section>
<section class="slide level2">

<div class="sourceCode" id="cb44"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb44-1"><a href="#cb44-1"></a><span class="at">showNext</span>(a <span class="kw">=&gt;</span> a <span class="op">+</span> <span class="dv">1</span>)<span class="op">;</span></span></code></pre></div>
<p><img data-src="images/comp-error-fn.png" /></p>
<aside class="notes">
<p>Here’s a function instead of the entire <code>user</code> object. Type error again.</p>
</aside>
</section>
<section class="slide level2">

<div class="sourceCode" id="cb45"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb45-1"><a href="#cb45-1"></a>type user <span class="op">=</span> <span class="op">{</span> <span class="dt">id</span><span class="op">:</span> int <span class="op">};</span></span>
<span id="cb45-2"><a href="#cb45-2"></a></span>
<span id="cb45-3"><a href="#cb45-3"></a><span class="kw">let</span> showNext <span class="op">=</span> u <span class="kw">=&gt;</span> <span class="op">{</span></span>
<span id="cb45-4"><a href="#cb45-4"></a>  <span class="va">Js</span>.<span class="at">log</span>(<span class="st">&quot;You will be user &quot;</span> <span class="op">++</span> <span class="at">string_of_int</span>(<span class="va">u</span>.<span class="at">id</span> <span class="op">+</span> <span class="dv">1</span>))<span class="op">;</span></span>
<span id="cb45-5"><a href="#cb45-5"></a><span class="op">};</span></span>
<span id="cb45-6"><a href="#cb45-6"></a></span>
<span id="cb45-7"><a href="#cb45-7"></a><span class="at">showNext</span>(<span class="op">{</span><span class="dt">id</span><span class="op">:</span> <span class="dv">44</span><span class="op">}</span>)<span class="op">;</span></span>
<span id="cb45-8"><a href="#cb45-8"></a><span class="at">showNext</span>(<span class="op">{</span><span class="dt">id</span><span class="op">:</span> <span class="dv">299</span><span class="op">}</span>)<span class="op">;</span></span>
<span id="cb45-9"><a href="#cb45-9"></a><span class="at">showNext</span>(<span class="op">{</span><span class="dt">id</span><span class="op">:</span> <span class="dv">-44</span><span class="op">}</span>)<span class="op">;</span></span></code></pre></div>
<pre><code>You will be user 45
You will be user 300
You will be user -4</code></pre>
<aside class="notes">
<p>We can keep going, but the only way to get the program to compile is to pass <code>showNext</code> the correct data. That’s the number one promise of Typed FP.</p>
</aside>
</section>
<section class="slide level2">

<p> </p>
<p> </p>
<h3 id="if-it-compiles-it-works">If it compiles, it works</h3>
<aside class="notes">
<p>A lot of my programming anxiety went away after I started programming with Reason. Because I know that if my program compiles, it works.</p>
<p>Its true!</p>
<p>But, what about logical errors?</p>
</aside>
</section>
<section class="slide level2">

<pre><code>  if item == &quot;tea&quot;
    pourCoffee()
  else
    pourTea()</code></pre>
<aside class="notes">
<p>Here someone asked for a tea, and we poured them a coffee. It will compile, but it is obviously wrong. This is a logical error, not a type error, and so the compiler cannot catch it.</p>
</aside>
</section>
<section class="slide level2">

<p> </p>
<h3 id="programming-is-difficult">Programming is difficult…</h3>
<p>due to clerical errors.</p>
<p>Logical mistakes are rare!</p>
<aside class="notes">
<p>But when I started writing typed FP after about a decade of dynamically typed languages, I realized that we programmers are a pretty decent bunch. It is very rare for us to be making logical errors in our code.</p>
<p>Our programs are all broken, make no mistake, but they are broken not because we wrote something when we meant the other. They’re borken because of clerical mistakes. Passing the wrong data to the wrong function.</p>
<p>But the Reason compiler is very good at catching those mistakes, which is why, “if it compiles, it works”.</p>
</aside>
</section>
<section class="slide level2">

<p><img data-src="images/parsing-membrane1.svg" /></p>
<aside class="notes">
<p>There is also something else to note: the program has no control over what data comes from the external world - like content that we read from the database</p>
</aside>
</section>
<section class="slide level2">

<p><img data-src="images/parsing-membrane2.svg" /></p>
<aside class="notes">
<p>or JSON API responses</p>
</aside>
</section>
<section class="slide level2">

<p><img data-src="images/parsing-membrane3.svg" /></p>
<aside class="notes">
<p>or even user inputs from the browser.</p>
</aside>
</section>
<section class="slide level2">

<p><img data-src="images/parsing-membrane4.svg" /></p>
<aside class="notes">
<p>We handle it in Reason by parsing all external data at the application boundary. In this picture I’ve labelled it as the “application membrane”.</p>
<p>(It is not a formal concept or anything by the way, I just made it up. But it has a nice ring to it no?)</p>
</aside>
</section>
<section class="slide level2">

<p><img data-src="images/parsing-membrane5.svg" /></p>
<aside class="notes">
<p>If the data that hits the application doesn’t slot into their corresponding types, then we can handle it then and there. Maybe it is an old API format and we’re on a new version. So there is nothing to be done except reject it and return an HTTP error code.</p>
<p>Or the incoming data is incomplete – but we can handle it gracefully by putting placeholder values.</p>
<p>Or it is simply wrong data and not salvageable. The point is we cannot allow malformed data into our system. Either we handle it, or we stop the request there.</p>
</aside>
</section>
<section class="slide level2">

<p><img data-src="images/parsing-membrane6.svg" /></p>
<aside class="notes">
<p>But if there are no issues, then this data gets parsed into our application types, and it hits the core.</p>
</aside>
</section>
<section class="slide level2">

<p><img data-src="images/parsing-membrane7.svg" /></p>
<aside class="notes">
<p>We can write this core without a single defensive check; no worries about null errors; not bothered whether the objects will have the right shape. We know, thanks to types, that everything will be just perfect.</p>
</aside>
</section>
<section class="slide level2">

<h3 id="learning-reason">Learning Reason</h3>
<ul>
<li><strong>Programming in the small</strong>
<ul>
<li>variables, data structures, iteration, functions</li>
</ul></li>
</ul>
<p><img data-src="images/reason-official-docs.png" /></p>
<aside class="notes">
<p>Alright, if you had to give Reason a shot, how would you go about it?</p>
<p>First, to learn any language, we have to be able to write small programs in it. You should be able to solve a fizzbuzz, read from a file, compute an average, make an API request – all these things. The concepts are standard: data structures, creating functions and calling them etc.</p>
<p>The official Reason documentation is a great starting point.</p>
</aside>
</section>
<section class="slide level2">

<h3 id="learning-reason-1">Learning Reason</h3>
<ul>
<li>Programming in the small</li>
<li><strong>Tooling</strong></li>
</ul>
<aside class="notes">
<p>Next, you need to get comfortable with the tooling.</p>
<p>You should be able to create a project, compile, and start tinkering on demand. That is a simple step but very crucial.</p>
<p>Knowing the tooling is the difference between wishing you had the time to play with something vs actually having fun with it.</p>
</aside>
</section>
<section class="slide level2">

<h3 id="learning-reason-2">Learning Reason</h3>
<ul>
<li><strong>Tooling</strong>
<ul>
<li>VSCode + Reason plugin</li>
<li>Official setup instructions</li>
</ul></li>
</ul>
<p><img data-src="images/tooling-bs-setup.png" /></p>
<aside class="notes">
<p>In Reason’s case, there isn’t much to the tooling. The most supported setup is VSCode + the VSCode Reason plugin.</p>
<p>The official setup guide works perfectly well to setup a new project. Install an npm package, start webpack and you’re off to the races.</p>
</aside>
</section>
<section class="slide level2">

<h3 id="learning-reason-3">Learning Reason</h3>
<ul>
<li>Programming in the large
<ul>
<li>modules</li>
</ul></li>
</ul>
<aside class="notes">
<p>The third thing to know is to how to Program in the Large. Have you ever been in a place where you know a thing - a language or a library - but you’re not yet confident to use it in production?</p>
<p>The missing thing usually is not knowing how to fit things into a larger canvas. In the case of Reason, the only construct you need to know is the <code>module</code>. It is very similar to regular JS modules – you can put a bunch of functions together, expose only a few public ones, and that’s it.</p>
</aside>
</section>
<section class="slide level2">

<h4 id="refactoring-2nd-edition">Refactoring (2nd edition)</h4>
<h4 id="by-martin-fowler">by Martin Fowler</h4>
<p><img data-src="images/refactoring-cover.jpg" /></p>
<aside class="notes">
<p>Alright, did you know that the venerable Refactoring book by Martin Fowler has a second edition, which uses Javascript instead of Java?</p>
<p>The first chapter of the book was available for free download in their website. lifted the opening exercise from it, so we can contrast an object-oriented version of a solution presented in Refactoring against a Typed Functional version we’ll write in Reason.</p>
</aside>
</section>
<section class="slide level2">

<div class="sourceCode" id="cb48"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb48-1"><a href="#cb48-1"></a><span class="kw">let</span> plays <span class="op">=</span> <span class="op">{</span></span>
<span id="cb48-2"><a href="#cb48-2"></a>  <span class="st">&quot;hamlet&quot;</span><span class="op">:</span> <span class="op">{</span> <span class="st">&quot;name&quot;</span><span class="op">:</span> <span class="st">&quot;Hamlet&quot;</span><span class="op">,</span> <span class="st">&quot;type&quot;</span><span class="op">:</span> <span class="st">&quot;tragedy&quot;</span> <span class="op">},</span></span>
<span id="cb48-3"><a href="#cb48-3"></a>  <span class="st">&quot;as-like&quot;</span><span class="op">:</span> <span class="op">{</span> <span class="st">&quot;name&quot;</span><span class="op">:</span> <span class="st">&quot;As You Like It&quot;</span><span class="op">,</span> <span class="st">&quot;type&quot;</span><span class="op">:</span> <span class="st">&quot;comedy&quot;</span> <span class="op">},</span></span>
<span id="cb48-4"><a href="#cb48-4"></a>  <span class="st">&quot;othello&quot;</span><span class="op">:</span> <span class="op">{</span> <span class="st">&quot;name&quot;</span><span class="op">:</span> <span class="st">&quot;Othello&quot;</span><span class="op">,</span> <span class="st">&quot;type&quot;</span><span class="op">:</span> <span class="st">&quot;tragedy&quot;</span> <span class="op">}</span></span>
<span id="cb48-5"><a href="#cb48-5"></a><span class="op">}</span></span>
<span id="cb48-6"><a href="#cb48-6"></a></span>
<span id="cb48-7"><a href="#cb48-7"></a><span class="kw">let</span> invoices <span class="op">=</span> [<span class="op">{</span></span>
<span id="cb48-8"><a href="#cb48-8"></a>  <span class="st">&quot;customer&quot;</span><span class="op">:</span> <span class="st">&quot;BigCo&quot;</span><span class="op">,</span></span>
<span id="cb48-9"><a href="#cb48-9"></a>  <span class="st">&quot;performances&quot;</span><span class="op">:</span> [</span>
<span id="cb48-10"><a href="#cb48-10"></a>    <span class="op">{</span> <span class="st">&quot;playID&quot;</span><span class="op">:</span> <span class="st">&quot;hamlet&quot;</span><span class="op">,</span> <span class="st">&quot;audience&quot;</span><span class="op">:</span> <span class="dv">55</span> <span class="op">},</span></span>
<span id="cb48-11"><a href="#cb48-11"></a>    <span class="op">{</span> <span class="st">&quot;playID&quot;</span><span class="op">:</span> <span class="st">&quot;as-like&quot;</span><span class="op">,</span> <span class="st">&quot;audience&quot;</span><span class="op">:</span> <span class="dv">35</span> <span class="op">},</span></span>
<span id="cb48-12"><a href="#cb48-12"></a>    <span class="op">{</span> <span class="st">&quot;playID&quot;</span><span class="op">:</span> <span class="st">&quot;othello&quot;</span><span class="op">,</span> <span class="st">&quot;audience&quot;</span><span class="op">:</span> <span class="dv">40</span> <span class="op">}</span>]</span>
<span id="cb48-13"><a href="#cb48-13"></a><span class="op">}</span>]<span class="op">;</span></span></code></pre></div>
<aside class="notes">
<p>We are a Drama troupe and we’re often hired by corporates for employee enterainment. We give them a combined invoice for all the plays we perform for them.</p>
<p>The exercise is to compute the amount we’ll bill for each invoice. The cost depends on the size of audience. We also have a different tariff for tragedies and comedies.</p>
</aside>
</section>
<section class="slide level2">

<p>amount = fn(audienceSize, playType)</p>
<div class="sourceCode" id="cb49"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb49-1"><a href="#cb49-1"></a><span class="cf">switch</span> (<span class="va">play</span>.<span class="at">type</span>) <span class="op">{</span></span>
<span id="cb49-2"><a href="#cb49-2"></a>  <span class="cf">case</span> <span class="st">&quot;tragedy&quot;</span><span class="op">:</span></span>
<span id="cb49-3"><a href="#cb49-3"></a>    thisAmount <span class="op">=</span> <span class="dv">40000</span><span class="op">;</span></span>
<span id="cb49-4"><a href="#cb49-4"></a>    <span class="cf">if</span> (<span class="va">perf</span>.<span class="at">audience</span> <span class="op">&gt;</span> <span class="dv">30</span>)</span>
<span id="cb49-5"><a href="#cb49-5"></a>      thisAmount <span class="op">+=</span> <span class="dv">1000</span> <span class="op">*</span> (<span class="va">perf</span>.<span class="at">audience</span> <span class="op">-</span> <span class="dv">30</span>)<span class="op">;</span></span>
<span id="cb49-6"><a href="#cb49-6"></a>    <span class="cf">break</span><span class="op">;</span></span>
<span id="cb49-7"><a href="#cb49-7"></a></span>
<span id="cb49-8"><a href="#cb49-8"></a>  <span class="cf">case</span> <span class="st">&quot;comedy&quot;</span><span class="op">:</span></span>
<span id="cb49-9"><a href="#cb49-9"></a>    thisAmount <span class="op">=</span> <span class="dv">30000</span><span class="op">;</span></span>
<span id="cb49-10"><a href="#cb49-10"></a>    <span class="cf">if</span> (<span class="va">perf</span>.<span class="at">audience</span> <span class="op">&gt;</span> <span class="dv">20</span>)</span>
<span id="cb49-11"><a href="#cb49-11"></a>      thisAmount <span class="op">+=</span> <span class="dv">10000</span> <span class="op">+</span> <span class="dv">500</span> <span class="op">*</span> (<span class="va">perf</span>.<span class="at">audience</span> <span class="op">-</span> <span class="dv">20</span>)<span class="op">;</span></span>
<span id="cb49-12"><a href="#cb49-12"></a>    thisAmount <span class="op">+=</span> <span class="dv">300</span> <span class="op">*</span> <span class="va">perf</span>.<span class="at">audience</span><span class="op">;</span></span>
<span id="cb49-13"><a href="#cb49-13"></a>    <span class="cf">break</span><span class="op">;</span></span>
<span id="cb49-14"><a href="#cb49-14"></a><span class="op">}</span></span></code></pre></div>
<aside class="notes">
<p>This is the imperative version of the billing code from the book. Don’t bother to understand the specifics - the computation logic is not relevant. Only important thing is that the bill amount depends on the size of the audience and the genre of the play.</p>
</aside>
</section>
<section class="slide level2">

<p>volumeCredit = fn(audienceSize, playType)</p>
<div class="sourceCode" id="cb50"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb50-1"><a href="#cb50-1"></a><span class="co">// add volume credits</span></span>
<span id="cb50-2"><a href="#cb50-2"></a>volumeCredits <span class="op">+=</span> <span class="va">Math</span>.<span class="at">max</span>(<span class="va">perf</span>.<span class="at">audience</span> <span class="op">-</span> <span class="dv">30</span><span class="op">,</span> <span class="dv">0</span>)<span class="op">;</span></span>
<span id="cb50-3"><a href="#cb50-3"></a></span>
<span id="cb50-4"><a href="#cb50-4"></a><span class="co">// add extra credit for every ten comedy attendees</span></span>
<span id="cb50-5"><a href="#cb50-5"></a><span class="cf">if</span> (<span class="st">&quot;comedy&quot;</span> <span class="op">===</span> <span class="va">play</span>.<span class="at">type</span>) volumeCredits <span class="op">+=</span> <span class="va">Math</span>.<span class="at">floor</span>(<span class="va">perf</span>.<span class="at">audience</span> <span class="op">/</span> <span class="dv">5</span>)<span class="op">;</span></span></code></pre></div>
<aside class="notes">
<p>Apart from total amount, we also have to compute volumeCredits, which is some kind of loyalty point. It is also a function of the audience size and genre of the play.</p>
</aside>
</section>
<section class="slide level2">

<div class="columns">
<div class="column" style="width:34%;">
<div class="sourceCode" id="cb51"><pre class="sourceCode javascript tinyFont noMaxHeight"><code class="sourceCode javascript"><span id="cb51-1"><a href="#cb51-1"></a><span class="kw">let</span> plays <span class="op">=</span> <span class="op">{</span></span>
<span id="cb51-2"><a href="#cb51-2"></a>  <span class="st">&quot;hamlet&quot;</span><span class="op">:</span> <span class="op">{</span> </span>
<span id="cb51-3"><a href="#cb51-3"></a>    <span class="st">&quot;name&quot;</span><span class="op">:</span> <span class="st">&quot;Hamlet&quot;</span><span class="op">,</span> </span>
<span id="cb51-4"><a href="#cb51-4"></a>    <span class="st">&quot;type&quot;</span><span class="op">:</span> <span class="st">&quot;tragedy&quot;</span> </span>
<span id="cb51-5"><a href="#cb51-5"></a>  <span class="op">},</span></span>
<span id="cb51-6"><a href="#cb51-6"></a>  <span class="st">&quot;as-like&quot;</span><span class="op">:</span> <span class="op">{</span> </span>
<span id="cb51-7"><a href="#cb51-7"></a>    <span class="st">&quot;name&quot;</span><span class="op">:</span> <span class="st">&quot;As You Like It&quot;</span><span class="op">,</span> </span>
<span id="cb51-8"><a href="#cb51-8"></a>    <span class="st">&quot;type&quot;</span><span class="op">:</span> <span class="st">&quot;comedy&quot;</span> </span>
<span id="cb51-9"><a href="#cb51-9"></a>  <span class="op">},</span></span>
<span id="cb51-10"><a href="#cb51-10"></a>  <span class="st">&quot;othello&quot;</span><span class="op">:</span> <span class="op">{</span> </span>
<span id="cb51-11"><a href="#cb51-11"></a>    <span class="st">&quot;name&quot;</span><span class="op">:</span> <span class="st">&quot;Othello&quot;</span><span class="op">,</span> </span>
<span id="cb51-12"><a href="#cb51-12"></a>    <span class="st">&quot;type&quot;</span><span class="op">:</span> <span class="st">&quot;tragedy&quot;</span> </span>
<span id="cb51-13"><a href="#cb51-13"></a>  <span class="op">}</span></span>
<span id="cb51-14"><a href="#cb51-14"></a><span class="op">}</span></span>
<span id="cb51-15"><a href="#cb51-15"></a></span>
<span id="cb51-16"><a href="#cb51-16"></a><span class="kw">let</span> invoices <span class="op">=</span> [<span class="op">{</span></span>
<span id="cb51-17"><a href="#cb51-17"></a>  <span class="st">&quot;customer&quot;</span><span class="op">:</span> <span class="st">&quot;BigCo&quot;</span><span class="op">,</span></span>
<span id="cb51-18"><a href="#cb51-18"></a>  <span class="st">&quot;performances&quot;</span><span class="op">:</span> [<span class="op">{</span> </span>
<span id="cb51-19"><a href="#cb51-19"></a>    <span class="st">&quot;playID&quot;</span><span class="op">:</span> <span class="st">&quot;hamlet&quot;</span><span class="op">,</span> </span>
<span id="cb51-20"><a href="#cb51-20"></a>    <span class="st">&quot;audience&quot;</span><span class="op">:</span> <span class="dv">55</span> </span>
<span id="cb51-21"><a href="#cb51-21"></a>  <span class="op">},{</span> </span>
<span id="cb51-22"><a href="#cb51-22"></a>    <span class="st">&quot;playID&quot;</span><span class="op">:</span> <span class="st">&quot;as-like&quot;</span><span class="op">,</span> </span>
<span id="cb51-23"><a href="#cb51-23"></a>    <span class="st">&quot;audience&quot;</span><span class="op">:</span> <span class="dv">35</span> </span>
<span id="cb51-24"><a href="#cb51-24"></a>  <span class="op">},{</span> </span>
<span id="cb51-25"><a href="#cb51-25"></a>    <span class="st">&quot;playID&quot;</span><span class="op">:</span> <span class="st">&quot;othello&quot;</span><span class="op">,</span> </span>
<span id="cb51-26"><a href="#cb51-26"></a>    <span class="st">&quot;audience&quot;</span><span class="op">:</span> <span class="dv">40</span> </span>
<span id="cb51-27"><a href="#cb51-27"></a>  <span class="op">}</span>]</span>
<span id="cb51-28"><a href="#cb51-28"></a><span class="op">}</span>]<span class="op">;</span></span></code></pre></div>
</div><div class="column" style="width:65%;">
<div class="sourceCode" id="cb52"><pre class="sourceCode javascript tinyFont noMaxHeight"><code class="sourceCode javascript"><span id="cb52-1"><a href="#cb52-1"></a><span class="kw">function</span> <span class="at">statement</span>(invoice<span class="op">,</span> plays) <span class="op">{</span></span>
<span id="cb52-2"><a href="#cb52-2"></a>  <span class="kw">let</span> totalAmount <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb52-3"><a href="#cb52-3"></a>  <span class="kw">let</span> volumeCredits <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb52-4"><a href="#cb52-4"></a>  <span class="cf">for</span> (<span class="kw">let</span> perf <span class="kw">of</span> <span class="va">invoice</span>.<span class="at">performances</span>) <span class="op">{</span></span>
<span id="cb52-5"><a href="#cb52-5"></a>    <span class="kw">const</span> play <span class="op">=</span> plays[<span class="va">perf</span>.<span class="at">playID</span>]<span class="op">;</span></span>
<span id="cb52-6"><a href="#cb52-6"></a>    <span class="kw">let</span> thisAmount <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb52-7"><a href="#cb52-7"></a>    <span class="cf">switch</span> (<span class="va">play</span>.<span class="at">type</span>) <span class="op">{</span></span>
<span id="cb52-8"><a href="#cb52-8"></a>      <span class="cf">case</span> <span class="st">&quot;tragedy&quot;</span><span class="op">:</span></span>
<span id="cb52-9"><a href="#cb52-9"></a>        thisAmount <span class="op">=</span> <span class="dv">40000</span><span class="op">;</span></span>
<span id="cb52-10"><a href="#cb52-10"></a>        <span class="cf">if</span> (<span class="va">perf</span>.<span class="at">audience</span> <span class="op">&gt;</span> <span class="dv">30</span>) <span class="op">{</span></span>
<span id="cb52-11"><a href="#cb52-11"></a>          thisAmount <span class="op">+=</span> <span class="dv">1000</span> <span class="op">*</span> (<span class="va">perf</span>.<span class="at">audience</span> <span class="op">-</span> <span class="dv">30</span>)<span class="op">;</span></span>
<span id="cb52-12"><a href="#cb52-12"></a>        <span class="op">}</span></span>
<span id="cb52-13"><a href="#cb52-13"></a>        <span class="cf">break</span><span class="op">;</span></span>
<span id="cb52-14"><a href="#cb52-14"></a>      <span class="cf">case</span> <span class="st">&quot;comedy&quot;</span><span class="op">:</span></span>
<span id="cb52-15"><a href="#cb52-15"></a>        thisAmount <span class="op">=</span> <span class="dv">30000</span><span class="op">;</span></span>
<span id="cb52-16"><a href="#cb52-16"></a>        <span class="cf">if</span> (<span class="va">perf</span>.<span class="at">audience</span> <span class="op">&gt;</span> <span class="dv">20</span>) <span class="op">{</span></span>
<span id="cb52-17"><a href="#cb52-17"></a>          thisAmount <span class="op">+=</span> <span class="dv">10000</span> <span class="op">+</span> <span class="dv">500</span> <span class="op">*</span> (<span class="va">perf</span>.<span class="at">audience</span> <span class="op">-</span> <span class="dv">20</span>)<span class="op">;</span></span>
<span id="cb52-18"><a href="#cb52-18"></a>        <span class="op">}</span></span>
<span id="cb52-19"><a href="#cb52-19"></a>        thisAmount <span class="op">+=</span> <span class="dv">300</span> <span class="op">*</span> <span class="va">perf</span>.<span class="at">audience</span><span class="op">;</span></span>
<span id="cb52-20"><a href="#cb52-20"></a>        <span class="cf">break</span><span class="op">;</span></span>
<span id="cb52-21"><a href="#cb52-21"></a>      <span class="cf">default</span><span class="op">:</span></span>
<span id="cb52-22"><a href="#cb52-22"></a>        <span class="cf">throw</span> <span class="kw">new</span> <span class="at">Error</span>(<span class="vs">`unknown type: </span><span class="sc">${</span><span class="va">play</span>.<span class="at">type</span><span class="sc">}</span><span class="vs">`</span>)<span class="op">;</span></span>
<span id="cb52-23"><a href="#cb52-23"></a>    <span class="op">}</span></span>
<span id="cb52-24"><a href="#cb52-24"></a>    volumeCredits <span class="op">+=</span> <span class="va">Math</span>.<span class="at">max</span>(<span class="va">perf</span>.<span class="at">audience</span> <span class="op">-</span> <span class="dv">30</span><span class="op">,</span> <span class="dv">0</span>)<span class="op">;</span></span>
<span id="cb52-25"><a href="#cb52-25"></a>    <span class="cf">if</span> (<span class="st">&quot;comedy&quot;</span> <span class="op">===</span> <span class="va">play</span>.<span class="at">type</span>) volumeCredits <span class="op">+=</span> <span class="va">Math</span>.<span class="at">floor</span>(<span class="va">perf</span>.<span class="at">audience</span> <span class="op">/</span> <span class="dv">5</span>)<span class="op">;</span></span>
<span id="cb52-26"><a href="#cb52-26"></a>    totalAmount <span class="op">+=</span> thisAmount<span class="op">;</span></span>
<span id="cb52-27"><a href="#cb52-27"></a>  <span class="op">}</span></span>
<span id="cb52-28"><a href="#cb52-28"></a>  <span class="cf">return</span> [totalAmount<span class="op">,</span> volumeCredits]<span class="op">;</span></span>
<span id="cb52-29"><a href="#cb52-29"></a><span class="op">}</span></span></code></pre></div>
</div>
</div>
<aside class="notes">
<p>So to reiterate, on the left is the data structure. On the right is a function that loops over all the invoices, and sums up the invoice amount and volumeCredit.</p>
<p>Now this code is not going to win anyone any job interviews. It gets the job done, but there is a reason why Martin Fowler chose it as the opening exercise of the book.</p>
<p>In fact he goes onto refactor it into a classical object-oriented solution:</p>
</aside>
</section>
<section class="slide level2">

<div class="sourceCode" id="cb53"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb53-1"><a href="#cb53-1"></a><span class="kw">class</span> TragedyCalculator <span class="kw">extends</span> PerformanceCalculator <span class="op">{</span></span>
<span id="cb53-2"><a href="#cb53-2"></a>  get <span class="at">amount</span>() <span class="op">{</span></span>
<span id="cb53-3"><a href="#cb53-3"></a>    <span class="kw">let</span> result <span class="op">=</span> <span class="dv">40000</span><span class="op">;</span></span>
<span id="cb53-4"><a href="#cb53-4"></a>    <span class="cf">if</span> (<span class="kw">this</span>.<span class="va">performance</span>.<span class="at">audience</span> <span class="op">&gt;</span> <span class="dv">30</span>) <span class="op">{</span></span>
<span id="cb53-5"><a href="#cb53-5"></a>      result <span class="op">+=</span> <span class="dv">1000</span> <span class="op">*</span> (<span class="kw">this</span>.<span class="va">performance</span>.<span class="at">audience</span> <span class="op">-</span> <span class="dv">30</span>)<span class="op">;</span></span>
<span id="cb53-6"><a href="#cb53-6"></a>    <span class="op">}</span></span>
<span id="cb53-7"><a href="#cb53-7"></a>    <span class="cf">return</span> result<span class="op">;</span></span>
<span id="cb53-8"><a href="#cb53-8"></a>  <span class="op">}</span></span>
<span id="cb53-9"><a href="#cb53-9"></a><span class="op">}</span></span></code></pre></div>
<aside class="notes">
<p>He makes a class to compute the cost for type of play. Here’s the one for Tragedy.</p>
</aside>
</section>
<section class="slide level2">

<div class="sourceCode" id="cb54"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb54-1"><a href="#cb54-1"></a><span class="kw">class</span> ComedyCalculator <span class="kw">extends</span> PerformanceCalculator <span class="op">{</span></span>
<span id="cb54-2"><a href="#cb54-2"></a>  get <span class="at">amount</span>() <span class="op">{</span></span>
<span id="cb54-3"><a href="#cb54-3"></a>    <span class="kw">let</span> result <span class="op">=</span> <span class="dv">30000</span><span class="op">;</span></span>
<span id="cb54-4"><a href="#cb54-4"></a>    <span class="cf">if</span> (<span class="kw">this</span>.<span class="va">performance</span>.<span class="at">audience</span> <span class="op">&gt;</span> <span class="dv">20</span>) <span class="op">{</span></span>
<span id="cb54-5"><a href="#cb54-5"></a>      result <span class="op">+=</span> <span class="dv">10000</span> <span class="op">+</span> <span class="dv">500</span> <span class="op">*</span> (<span class="kw">this</span>.<span class="va">performance</span>.<span class="at">audience</span> <span class="op">-</span> <span class="dv">20</span>)<span class="op">;</span></span>
<span id="cb54-6"><a href="#cb54-6"></a>    <span class="op">}</span></span>
<span id="cb54-7"><a href="#cb54-7"></a>    result <span class="op">+=</span> <span class="dv">300</span> <span class="op">*</span> <span class="kw">this</span>.<span class="va">performance</span>.<span class="at">audience</span><span class="op">;</span></span>
<span id="cb54-8"><a href="#cb54-8"></a>    <span class="cf">return</span> result<span class="op">;</span></span>
<span id="cb54-9"><a href="#cb54-9"></a>  <span class="op">}</span></span>
<span id="cb54-10"><a href="#cb54-10"></a>  get <span class="at">volumeCredits</span>() <span class="op">{</span></span>
<span id="cb54-11"><a href="#cb54-11"></a>    <span class="cf">return</span> <span class="kw">super</span>.<span class="at">volumeCredits</span> <span class="op">+</span> <span class="va">Math</span>.<span class="at">floor</span>(<span class="kw">this</span>.<span class="va">performance</span>.<span class="at">audience</span> <span class="op">/</span> <span class="dv">5</span>)<span class="op">;</span></span>
<span id="cb54-12"><a href="#cb54-12"></a>  <span class="op">}</span></span>
<span id="cb54-13"><a href="#cb54-13"></a><span class="op">}</span></span></code></pre></div>
<aside class="notes">
<p>Here’s the one for comedy. Both the classes inherit from a parent class called PerformanceCalculator.</p>
</aside>
</section>
<section class="slide level2">

<div class="sourceCode" id="cb55"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb55-1"><a href="#cb55-1"></a><span class="kw">class</span> PerformanceCalculator <span class="op">{</span></span>
<span id="cb55-2"><a href="#cb55-2"></a>  <span class="at">constructor</span>(aPerformance<span class="op">,</span> aPlay) <span class="op">{</span></span>
<span id="cb55-3"><a href="#cb55-3"></a>    <span class="kw">this</span>.<span class="at">performance</span> <span class="op">=</span> aPerformance<span class="op">;</span></span>
<span id="cb55-4"><a href="#cb55-4"></a>    <span class="kw">this</span>.<span class="at">play</span> <span class="op">=</span> aPlay<span class="op">;</span></span>
<span id="cb55-5"><a href="#cb55-5"></a>  <span class="op">}</span></span>
<span id="cb55-6"><a href="#cb55-6"></a></span>
<span id="cb55-7"><a href="#cb55-7"></a>  get <span class="at">amount</span>() <span class="op">{</span></span>
<span id="cb55-8"><a href="#cb55-8"></a>    <span class="cf">throw</span> <span class="kw">new</span> <span class="at">Error</span>(<span class="st">&#39;subclass responsibility&#39;</span>)<span class="op">;</span></span>
<span id="cb55-9"><a href="#cb55-9"></a>  <span class="op">}</span></span>
<span id="cb55-10"><a href="#cb55-10"></a></span>
<span id="cb55-11"><a href="#cb55-11"></a>  get <span class="at">volumeCredits</span>() <span class="op">{</span></span>
<span id="cb55-12"><a href="#cb55-12"></a>    <span class="cf">return</span> <span class="va">Math</span>.<span class="at">max</span>(<span class="kw">this</span>.<span class="va">performance</span>.<span class="at">audience</span> <span class="op">-</span> <span class="dv">30</span><span class="op">,</span> <span class="dv">0</span>)<span class="op">;</span></span>
<span id="cb55-13"><a href="#cb55-13"></a>  <span class="op">}</span></span>
<span id="cb55-14"><a href="#cb55-14"></a><span class="op">}</span></span></code></pre></div>
<aside class="notes">
<p>And PerformanceCalculator is here that all the common behaviour sits.</p>
</aside>
</section>
<section class="slide level2">

<div class="sourceCode" id="cb56"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb56-1"><a href="#cb56-1"></a><span class="kw">function</span> <span class="at">createPerformanceCalculator</span>(aPerformance<span class="op">,</span> aPlay) <span class="op">{</span></span>
<span id="cb56-2"><a href="#cb56-2"></a>  <span class="cf">switch</span> (<span class="va">aPlay</span>.<span class="at">type</span>) <span class="op">{</span></span>
<span id="cb56-3"><a href="#cb56-3"></a>    <span class="cf">case</span> <span class="st">&quot;tragedy&quot;</span><span class="op">:</span> <span class="cf">return</span> <span class="kw">new</span> <span class="at">TragedyCalculator</span>(aPerformance<span class="op">,</span> aPlay)<span class="op">;</span></span>
<span id="cb56-4"><a href="#cb56-4"></a>    <span class="cf">case</span> <span class="st">&quot;comedy&quot;</span><span class="op">:</span> <span class="cf">return</span> <span class="kw">new</span> <span class="at">ComedyCalculator</span>(aPerformance<span class="op">,</span> aPlay)<span class="op">;</span></span>
<span id="cb56-5"><a href="#cb56-5"></a>    <span class="cf">default</span><span class="op">:</span></span>
<span id="cb56-6"><a href="#cb56-6"></a>      <span class="cf">throw</span> <span class="kw">new</span> <span class="at">Error</span>(<span class="vs">`unknown type: </span><span class="sc">${</span><span class="va">aPlay</span>.<span class="at">type</span><span class="sc">}</span><span class="vs">`</span>)<span class="op">;</span></span>
<span id="cb56-7"><a href="#cb56-7"></a>  <span class="op">}</span></span>
<span id="cb56-8"><a href="#cb56-8"></a><span class="op">}</span></span></code></pre></div>
<aside class="notes">
<p>And finally we have the orchestrator. Instead of all the computation bunched together, this function creates the appropriate class based on the kind of play. And uses that to compute the values.</p>
<p>Now, this is good OO. But I’ve always found OO difficult. I did learn how to reason about them, with a lot of practice, and I can even write well-designed object oriented code these days. But it takes mental energy that I often don’t want to spend.</p>
</aside>
</section>
<section class="slide level2">

<h4 id="object-oriented-programming">Object-oriented programming</h4>
<p><img data-src="images/oo-vision.svg" /></p>
<aside class="notes">
<p>Here, this is Alan Kay’s vision of objects. It is a model of computation expressed through stateful entities that exist in space and time.</p>
<p>They receieve messages, respond to them, and send messages to other objects.</p>
<p>The inner life of each of these object can be very complex. They can mutate their own, and they can contain a multitude of other stateful objects inside them.</p>
</aside>
</section>
<section class="slide level2">

<blockquote>
<p>I wanted to get rid of data. I realized that the cell/whole-computer metaphor would get rid of data. – Alan Kay on OO</p>
</blockquote>
<p> </p>
<p>“behaviour” (methods) over data</p>
<aside class="notes">
<p>The whole purpose of this machinery though is to <em>hide</em> data from us. That was Alan Kay’s explicit goal with OO. So how are we supposed to make sense of these programs?</p>
</aside>
</section>
<section class="slide level2">

<p><img data-src="images/oo-solid.svg" /></p>
<aside class="notes">
<p>There is help - if only we followed the SOLID principles we could write great object-oriented code! But when was the last time in a code review someone said that this code violates the Liskov Substitution Principle?</p>
<p>See we think about programs informally, not through a set of abstract “principles” like SOLID, and we deserve a way to write programs, high-quality programs, in a way that is natural to the way we think.</p>
<p>The Typed Functional approach, in contrast, is centered around data.</p>
</aside>
</section>
<section class="slide level2">

<div class="sourceCode" id="cb57"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb57-1"><a href="#cb57-1"></a><span class="kw">let</span> plays <span class="op">=</span> <span class="op">{</span></span>
<span id="cb57-2"><a href="#cb57-2"></a>  <span class="st">&quot;hamlet&quot;</span><span class="op">:</span> <span class="op">{</span> <span class="st">&quot;name&quot;</span><span class="op">:</span> <span class="st">&quot;Hamlet&quot;</span><span class="op">,</span> <span class="st">&quot;type&quot;</span><span class="op">:</span> <span class="st">&quot;tragedy&quot;</span> <span class="op">},</span></span>
<span id="cb57-3"><a href="#cb57-3"></a>  <span class="st">&quot;as-like&quot;</span><span class="op">:</span> <span class="op">{</span> <span class="st">&quot;name&quot;</span><span class="op">:</span> <span class="st">&quot;As You Like It&quot;</span><span class="op">,</span> <span class="st">&quot;type&quot;</span><span class="op">:</span> <span class="st">&quot;comedy&quot;</span> <span class="op">},</span></span>
<span id="cb57-4"><a href="#cb57-4"></a>  <span class="st">&quot;othello&quot;</span><span class="op">:</span> <span class="op">{</span> <span class="st">&quot;name&quot;</span><span class="op">:</span> <span class="st">&quot;Othello&quot;</span><span class="op">,</span> <span class="st">&quot;type&quot;</span><span class="op">:</span> <span class="st">&quot;tragedy&quot;</span> <span class="op">}</span></span>
<span id="cb57-5"><a href="#cb57-5"></a><span class="op">}</span></span></code></pre></div>
<aside class="notes">
<p>Here let’s revisit the shape of our data. In Typed FP, we’ll create a type to represent these plays.</p>
</aside>
</section>
<section class="slide level2">

<div class="sourceCode" id="cb58"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb58-1"><a href="#cb58-1"></a><span class="kw">let</span> plays <span class="op">=</span> <span class="op">{</span></span>
<span id="cb58-2"><a href="#cb58-2"></a>  <span class="st">&quot;hamlet&quot;</span><span class="op">:</span> <span class="op">{</span> <span class="st">&quot;name&quot;</span><span class="op">:</span> <span class="st">&quot;Hamlet&quot;</span><span class="op">,</span> <span class="st">&quot;type&quot;</span><span class="op">:</span> <span class="st">&quot;tragedy&quot;</span> <span class="op">},</span></span>
<span id="cb58-3"><a href="#cb58-3"></a>  <span class="st">&quot;as-like&quot;</span><span class="op">:</span> <span class="op">{</span> <span class="st">&quot;name&quot;</span><span class="op">:</span> <span class="st">&quot;As You Like It&quot;</span><span class="op">,</span> <span class="st">&quot;type&quot;</span><span class="op">:</span> <span class="st">&quot;comedy&quot;</span> <span class="op">},</span></span>
<span id="cb58-4"><a href="#cb58-4"></a>  <span class="st">&quot;othello&quot;</span><span class="op">:</span> <span class="op">{</span> <span class="st">&quot;name&quot;</span><span class="op">:</span> <span class="st">&quot;Othello&quot;</span><span class="op">,</span> <span class="st">&quot;type&quot;</span><span class="op">:</span> <span class="st">&quot;tragedy&quot;</span> <span class="op">}</span></span>
<span id="cb58-5"><a href="#cb58-5"></a><span class="op">}</span></span></code></pre></div>
<div class="sourceCode" id="cb59"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb59-1"><a href="#cb59-1"></a>module Play <span class="op">=</span> <span class="op">{</span></span>
<span id="cb59-2"><a href="#cb59-2"></a>  type t <span class="op">=</span> <span class="op">{</span></span>
<span id="cb59-3"><a href="#cb59-3"></a>    <span class="dt">name</span><span class="op">:</span> string<span class="op">,</span></span>
<span id="cb59-4"><a href="#cb59-4"></a>    <span class="dt">genre</span><span class="op">:</span> <span class="va">Genre</span>.<span class="at">t</span><span class="op">,</span></span>
<span id="cb59-5"><a href="#cb59-5"></a>  <span class="op">};</span></span>
<span id="cb59-6"><a href="#cb59-6"></a><span class="op">};</span></span></code></pre></div>
<aside class="notes">
<p>Here’s the type <code>t</code> inside module Play. The module is a namespace so that we can bunch together all functions that operate on the Play type into one place.</p>
<p>The name of the type <code>t</code> is used to denote that this is the primary type of this module. This is a useful convention in OCaml and Reason codebases.</p>
<p>Genre here is the type of the play - it could be a tragedy or a comedy. Let’s now see what that module looks like.</p>
</aside>
</section>
<section class="slide level2">

<div class="sourceCode" id="cb60"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb60-1"><a href="#cb60-1"></a>module Play <span class="op">=</span> <span class="op">{</span></span>
<span id="cb60-2"><a href="#cb60-2"></a>  type t <span class="op">=</span> <span class="op">{</span></span>
<span id="cb60-3"><a href="#cb60-3"></a>    <span class="dt">name</span><span class="op">:</span> string<span class="op">,</span></span>
<span id="cb60-4"><a href="#cb60-4"></a>    <span class="dt">genre</span><span class="op">:</span> <span class="va">Genre</span>.<span class="at">t</span><span class="op">,</span></span>
<span id="cb60-5"><a href="#cb60-5"></a>  <span class="op">};</span></span>
<span id="cb60-6"><a href="#cb60-6"></a><span class="op">};</span></span>
<span id="cb60-7"><a href="#cb60-7"></a></span>
<span id="cb60-8"><a href="#cb60-8"></a>module Genre <span class="op">=</span> <span class="op">{</span></span>
<span id="cb60-9"><a href="#cb60-9"></a>  type t <span class="op">=</span></span>
<span id="cb60-10"><a href="#cb60-10"></a>    <span class="op">|</span> Tragedy</span>
<span id="cb60-11"><a href="#cb60-11"></a>    <span class="op">|</span> Comedy<span class="op">;</span></span>
<span id="cb60-12"><a href="#cb60-12"></a><span class="op">}</span></span></code></pre></div>
<aside class="notes">
<p>This type t here are called Sum Types. Sum types is one of those concepts that you learn and then you look back and wonder where it was all your life. It lets you specify that something can be A or B. Here Genre could be either Tragedy or Comedy. It must to be either of it; it can’t be empty or null. Nor can it be both Tragedy and Comedy.</p>
</aside>
</section>
<section class="slide level2">

<div class="sourceCode" id="cb61"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb61-1"><a href="#cb61-1"></a>module Play <span class="op">=</span> <span class="op">{</span></span>
<span id="cb61-2"><a href="#cb61-2"></a>  type t <span class="op">=</span> <span class="op">{</span></span>
<span id="cb61-3"><a href="#cb61-3"></a>    <span class="dt">name</span><span class="op">:</span> string<span class="op">,</span></span>
<span id="cb61-4"><a href="#cb61-4"></a>    <span class="dt">genre</span><span class="op">:</span> <span class="va">Genre</span>.<span class="at">t</span><span class="op">,</span></span>
<span id="cb61-5"><a href="#cb61-5"></a>  <span class="op">};</span></span>
<span id="cb61-6"><a href="#cb61-6"></a><span class="op">};</span></span>
<span id="cb61-7"><a href="#cb61-7"></a></span>
<span id="cb61-8"><a href="#cb61-8"></a>module Genre <span class="op">=</span> <span class="op">{</span></span>
<span id="cb61-9"><a href="#cb61-9"></a>  type t <span class="op">=</span></span>
<span id="cb61-10"><a href="#cb61-10"></a>    <span class="op">|</span> Tragedy</span>
<span id="cb61-11"><a href="#cb61-11"></a>    <span class="op">|</span> Comedy<span class="op">;</span></span>
<span id="cb61-12"><a href="#cb61-12"></a><span class="op">}</span></span>
<span id="cb61-13"><a href="#cb61-13"></a></span>
<span id="cb61-14"><a href="#cb61-14"></a>module Performance <span class="op">=</span> <span class="op">{</span></span>
<span id="cb61-15"><a href="#cb61-15"></a>  type t <span class="op">=</span> <span class="op">{</span></span>
<span id="cb61-16"><a href="#cb61-16"></a>    <span class="dt">play</span><span class="op">:</span> <span class="va">Play</span>.<span class="at">t</span><span class="op">,</span></span>
<span id="cb61-17"><a href="#cb61-17"></a>    <span class="dt">audience</span><span class="op">:</span> int<span class="op">,</span></span>
<span id="cb61-18"><a href="#cb61-18"></a>  <span class="op">};</span></span>
<span id="cb61-19"><a href="#cb61-19"></a><span class="op">}</span></span></code></pre></div>
<aside class="notes">
<p>We now have the root type – a Performance, which composes Play and the number of audience.</p>
</aside>
</section>
<section class="slide level2">

<aside class="notes">
<ul>
<li>Show how behaviour is added</li>
<li>Be explicit on data flow</li>
<li>No runtime errors. 1 or 2 errors in Elm Feldman.</li>
</ul>
</aside>
</section>
<section><section id="fin." class="title-slide slide level1"><h1>Fin.</h1></section><section class="slide level2">

<div class="sourceCode" id="cb62"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb62-1"><a href="#cb62-1"></a><span class="at">showNext</span>(<span class="op">{</span><span class="dt">id</span><span class="op">:</span> <span class="kw">null</span><span class="op">}</span>)<span class="op">;</span></span></code></pre></div>
<p><img data-src="images/comp-error-1-null.png" /></p>
<aside class="notes">
<p>But what about null? What if we pass null to <code>showNext</code>?</p>
<p>Again the code does not compile. This is because Reason doesn’t even have the concept of nulls. the concept of nulls. So instead of allowing to run the code and crash at runtime, it simply prevents the code from even being even executed.</p>
<p>But we use nulls in Javascript to represent the “absence” of something. Reason does have an elegant way to do that. I will show how that works soon.</p>
</aside>
</section></section>
    </div>
  </div>

  <script src="./js/reveal.js"></script>

  <script>

      // Full list of configuration options available at:
      // https://github.com/hakimel/reveal.js#configuration      
      Reveal.initialize({
        history: true,
        transition: 'fade',
        transitionSpeed: 'fast',
        center: false,
        dependencies: [
          { src: './lib/js/classList.js', condition: function() { return !document.body.classList; } },
          { src: './plugin/zoom-js/zoom.js', async: true },
          { src: './plugin/notes/notes.js', async: true }
        ]
      });
    </script>
    </body>
</html>
